import{_ as o}from"./TheTopNav.ab2d8892.js";import{_ as r}from"./Listing.0f76bac1.js";import{b as i,r as a,e as g}from"./tmdbAPI.f1c79019.js";import{_ as u,c as d,b as p,n as _,q as f,o as n}from"./entry.b94904b0.js";import"./chevron-left.d64a7219.js";import"./nuxt-link.4b690bdb.js";import"./loading-spinner.4dbc908b.js";const T={components:{TheTopNav:o,Listing:r},async asyncData({params:t,error:s}){try{return{items:t.name==="trending"?await i("tv"):await a(t.name)}}catch{s({message:"Page not found"})}},data(){return{loading:!1}},head(){return{title:this.metaTitle,meta:[{hid:"og:title",property:"og:title",content:this.metaTitle},{hid:"og:url",property:"og:url",content:`${{}.FRONTEND_URL}${this.$route.path}`}],bodyAttrs:{class:"topnav-active"}}},computed:{metaTitle(){return this.title},title(){return g("tv",this.$route.params.name).title},listingShown(){var t;return(t=this.items)==null?void 0:t.results.length}},methods:{loadMore(){this.loading=!0,this.$route.params.name==="trending"?i("tv",this.items.page+1).then(t=>{this.items.results=this.items.results.concat(t.results),this.items.page=t.page,this.loading=!1}).catch(()=>{this.loading=!1}):a(this.$route.params.name,this.items.page+1).then(t=>{this.items.results=this.items.results.concat(t.results),this.items.page=t.page,this.loading=!1}).catch(()=>{this.loading=!1})}}},v={class:"main"};function y(t,s,l,L,m,e){const c=o,h=r;return n(),d("main",v,[p(c,{title:e.metaTitle},null,8,["title"]),e.listingShown?(n(),_(h,{key:0,title:e.title,items:t.items,loading:m.loading,onLoadMore:e.loadMore},null,8,["title","items","loading","onLoadMore"])):f("",!0)])}const B=u(T,[["render",y]]);export{B as default};
