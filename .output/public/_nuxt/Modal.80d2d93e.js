import{N as k}from"./tmdbAPI.f1c79019.js";import{_ as S,z,s as h,o as d,n as _,w as E,a as o,u as y,A as c,b as f,c as b,q as u,t as w,T as L}from"./entry.b94904b0.js";import{C as N}from"./cross.1fce9c4e.js";import{C as q}from"./chevron-left.d64a7219.js";const B=""+new URL("chevron-right.2ae0b701.svg?inline",import.meta.url).href;let p,i,m,v;const D={components:{CrossIcon:N,ChevronLeftIcon:q,ChevronRightIcon:B},props:{data:{type:Array,required:!1,default(){return[]}},type:{type:String,required:!1,default:"image"},modifier:{type:String,required:!1,default:""},nav:{type:Boolean,required:!1,default:!1},startAt:{type:Number,required:!1,default:0},ariaLabel:{type:String,required:!1,default:""}},data(){return{selected:null,activeItem:null}},head(){return{bodyAttrs:{class:"modal-open"}}},computed:{modalClass(){return{"modal--nav":this.showNav,[`modal--${this.type}`]:!0,[this.modifier]:!0}},showNav(){return this.nav&&this.data.length>1},label(){var e;return this.ariaLabel?this.ariaLabel:(e=this.activeItem)!=null&&e.name?this.activeItem.name:null},activeItemIframeShown(){return this.type==="iframe"&&this.activeItem},activeItemImageShown(){var e;return this.type==="image"&&((e=this.activeItem)==null?void 0:e.src)}},watch:{selected(){this.activeItem=this.data[this.selected]}},created(){this.selected=this.startAt},beforeMount(){window.addEventListener("keydown",this.handleKeyDown),p=document.activeElement},mounted(){i=this.$refs.modal.querySelectorAll(`
        a[href],
        area[href],
        input:not([disabled]),
        select:not([disabled]),
        textarea:not([disabled]),
        button:not([disabled]),
        [tabindex="0"]
      `),i=Array.prototype.slice.call(i),m=i[0],v=i[i.length-1],m.focus(),this.type==="iframe"&&(this.handleIframeSize(),window.addEventListener("resize",this.resizeIframeSize))},beforeDestroy(){window.removeEventListener("keydown",this.handleKeyDown),this.type==="iframe"&&window.removeEventListener("resize",this.resizeIframeSize),p&&p.focus()},methods:{previous(){this.selected=(this.selected-1+this.data.length)%this.data.length},next(){this.selected=(this.selected+1)%this.data.length},close(){this.$emit("close")},handleKeyDown(e){if(e.keyCode===27)this.close();else if(this.nav&&e.keyCode===39)this.next();else if(this.nav&&e.keyCode===37)this.previous();else if(e.keyCode===9){if(i.length===1){e.preventDefault();return}e.shiftKey?this.handleBackwardTab(e):this.handleForwardTab(e)}},handleForwardTab(e){document.activeElement===v&&(e.preventDefault(),m.focus())},handleBackwardTab(e){document.activeElement===m&&(e.preventDefault(),v.focus())},handleIframeSize(){const e=1.7777777777777777,a=getComputedStyle(this.$refs.modal);let s=this.$refs.modal.offsetWidth,n=this.$refs.modal.offsetHeight,l,t;s-=parseFloat(a.paddingRight)+parseFloat(a.paddingLeft),n-=parseFloat(a.paddingTop)+parseFloat(a.paddingBottom),l=s,t=n,n>s/e?t=s/e:s>n*e&&(l=n*e),this.$refs.modal.querySelector(".modal__iframe").style.width=`${l}px`,this.$refs.modal.querySelector(".modal__iframe").style.height=`${t}px`},resizeIframeSize:z(function(){this.handleIframeSize()},600)}},F=["aria-label"],A={class:"modal__wrap"},T=["src"],R={key:0,class:"modal__nav"},K={class:"modal__count"};function M(e,a,s,n,l,t){const g=h("CrossIcon"),I=k,C=h("ChevronLeftIcon"),x=h("ChevronRightIcon");return d(),_(L,{name:"modal",appear:""},{default:E(()=>[o("div",{ref:"modal",class:y(["modal",t.modalClass]),tabindex:"-1","aria-hidden":"false","aria-label":t.label,role:"dialog",onClick:a[4]||(a[4]=(...r)=>t.close&&t.close(...r))},[o("div",A,[o("div",{class:"modal__body",onClick:a[3]||(a[3]=c(()=>{},["stop"]))},[o("button",{class:"modal__close","aria-label":"Close",type:"button",onClick:a[0]||(a[0]=c((...r)=>t.close&&t.close(...r),["stop"]))},[f(g)]),o("div",{class:y(`modal__${s.type}`)},[t.activeItemIframeShown?(d(),b("iframe",{key:0,src:l.activeItem.src,frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""},null,8,T)):u("",!0),t.activeItemImageShown?(d(),_(I,{key:1,src:l.activeItem.src},null,8,["src"])):u("",!0)],2),t.showNav?(d(),b("div",R,[o("button",{class:"modal__arrow modal__arrow--prev","aria-label":"Previous",type:"button",onClick:a[1]||(a[1]=c((...r)=>t.previous&&t.previous(...r),["stop"]))},[f(C)]),o("div",K,w(l.selected+1)+" / "+w(s.data.length),1),o("button",{class:"modal__arrow modal__arrow--next","aria-label":"Next",type:"button",title:"Next",onClick:a[2]||(a[2]=c((...r)=>t.next&&t.next(...r),["stop"]))},[f(x)])])):u("",!0)])])],10,F)]),_:1})}const O=S(D,[["render",M]]);export{B as C,O as _};
