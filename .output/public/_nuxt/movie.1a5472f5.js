import{_ as r}from"./TheTopNav.ab2d8892.js";import{_ as l}from"./Listing.0f76bac1.js";import{g as n,a as g}from"./tmdbAPI.f1c79019.js";import{_ as h,c as u,b as p,n as _,q as f,o as a}from"./entry.b94904b0.js";import"./chevron-left.d64a7219.js";import"./nuxt-link.4b690bdb.js";import"./loading-spinner.4dbc908b.js";const v={components:{TheTopNav:r,Listing:l},async asyncData({params:t,error:o}){try{const s=await n("movie",t.id),i=(await g("movie")).find(e=>e.id===parseInt(t.id));if(i)return{items:s,genre:i};o({message:"Page not found"})}catch{o({statusCode:504,message:"Data not available"})}},data(){return{loading:!1}},head(){return{title:this.metaTitle,meta:[{hid:"og:title",property:"og:title",content:this.metaTitle},{hid:"og:url",property:"og:url",content:`${{}.FRONTEND_URL}${this.$route.path}`}],bodyAttrs:{class:"topnav-active"}}},computed:{metaTitle(){return this.title},title(){return this.genre?`Movie Genre: ${this.genre.name}`:"Movie Genre"},listingShown(){return this.items.results.length}},methods:{loadMore(){this.loading=!0,n("movie",this.$route.params.id,this.items.page+1).then(t=>{this.items.results=this.items.results.concat(t.results),this.items.page=t.page,this.loading=!1}).catch(()=>{this.loading=!1})}}},T={class:"main"};function y(t,o,s,m,i,e){const c=r,d=l;return a(),u("main",T,[p(c,{title:e.metaTitle},null,8,["title"]),e.listingShown?(a(),_(d,{key:0,title:e.title,items:t.items,loading:i.loading,onLoadMore:e.loadMore},null,8,["title","items","loading","onLoadMore"])):f("",!0)])}const G=h(v,[["render",y]]);export{G as default};
